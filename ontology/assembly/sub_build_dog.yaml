assembly_name: dog_sub
imports:
  body_0a1a: build_0a1a.yaml
  hns_0a1a: build_0a1a2a.yaml

# Object definitions
objects:
  sphere_head:
    type: Sphere

  peg_nose:
    type: Peg

  peg_tail:
    type: Peg

  screw_front:
    type: Screw

  screw_back:
    type: Screw

  nut_front:
    type: Nut

  nut_back:
    type: Nut

  wafer_front1:
    type: Wafer

  wafer_front2:
    type: Wafer

  wafer_back1:
    type: Wafer

  wafer_back2:
    type: Wafer

# Connection definitions
operations:
  nose:
    type: InsertFixedConnection
    shaft: peg_nose
    hole: hns_0a1a.sphere

  tail:
    type: InsertFixedConnection
    shaft: peg_tail
    hole: body_0a1a.cube

  body1:
    type: InsertFixedConnection
    shaft: body_0a1a.peg
    hole: hns_0a1a.neck_0a1a.cube

  front1:
    type: InsertLooseConnection
    shaft: screw_front
    hole: wafer_front1
    uses: Thread
    length: 5

  front2:
    type: InsertLooseConnection
    shaft: screw_front
    hole: hns_0a1a.neck_0a1a.cube
    uses: Thread
    length: 50

  front3:
    type: InsertLooseConnection
    shaft: screw_front
    hole: wafer_front2
    uses: Thread
    length: 5

  thread_front:
    type: ThreadedConnection
    provider: screw_front
    consumer: nut_front

  back1:
    type: InsertLooseConnection
    shaft: screw_back
    hole: wafer_back1
    uses: Thread
    length: 5

  back2:
    type: InsertLooseConnection
    shaft: screw_back
    hole: body_0a1a.cube
    uses: Thread
    length: 50

  back3:
    type: InsertLooseConnection
    shaft: screw_back
    hole: wafer_back2
    uses: Thread
    length: 5

  thread_back:
    type: ThreadedConnection
    provider: screw_back
    consumer: nut_back

# Relation definitions
relations:
  - type: PerpendicularRelation
    operations: [nose, hns_0a1a.neck]
    reference: hns_0a1a.sphere

  - type: PerpendicularRelation
    operations: [hns_0a1a.neck_0a1a.conn, body1]
    reference: hns_0a1a.neck_0a1a.cube

  - type: PerpendicularRelation
    operations: [front2, body1]
    reference: hns_0a1a.neck_0a1a.cube

  - type: PerpendicularRelation
    operations: [front2, hns_0a1a.neck_0a1a.conn]
    reference: hns_0a1a.neck_0a1a.cube

  - type: PerpendicularRelation
    operations: [back2, body_0a1a.conn]
    reference: body_0a1a.cube

  - type: PerpendicularRelation
    operations: [front2, hns_0a1a.neck_0a1a.conn]
    reference: body_0a1a.cube

  - type: OppositeRelation
    operations: [tail, body_0a1a.conn]
    reference: body_0a1a.cube

# Order definitions
order_hints:
  - type: RequiredOrder
    first: front1
    then: front2

  - type: RequiredOrder
    first: front2
    then: front3

  - type: RequiredOrder
    first: front3
    then: thread_front

  - type: RequiredOrder
    first: back1
    then: back2

  - type: RequiredOrder
    first: back2
    then: back3

  - type: RequiredOrder
    first: back3
    then: thread_back

  - type: RequiredOrder
    first: front1
    then: back1

  - type: AnyOrder
    operations: [body1, body_0a1a.conn]
